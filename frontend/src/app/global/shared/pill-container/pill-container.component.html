<div class="pill-container">
    <div *ngFor="let group of pillGroups" class="time-group">
        <ng-container *ngIf="getVisiblePills(group.pills).length > 0">
            <div class="schedule-time">
                <h2>{{ group.time }}</h2>
            </div>
            
            <ng-container *ngFor="let pill of getVisiblePills(group.pills); let i = index">
                <app-pill-card
                    [pillId]="pill.id"
                    [pillName]="pill.name"
                    [dosage]="pill.dosage"
                    [pillIcon]="pill.image || 'assets/icons/pill.svg'"
                    [status]="getDisplayStatus(pill)"
                    [daysLeft]="getDaysLeft(pill)"
                    [lowPillWarning]="isLowStock(pill)"
                ></app-pill-card>
                <br *ngIf="i < getVisiblePills(group.pills).length - 1" />
            </ng-container>
        </ng-container>
    </div>

    <div *ngIf="getTotalVisiblePillsCount() === 0" class="no-pills">
        <p>No pills scheduled for today.</p>
    </div>
</div>