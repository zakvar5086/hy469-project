<div class="overlay" (click)="popupService.close()">
    <div class="popup" (click)="$event.stopPropagation()" [ngClass]="{'kid-mode' : isKid}">
        <button class="close-btn" (click)="popupService.close()">Ã—</button>
        
        <h2 class="title">Time for your {{ pill.time }} pills</h2>
        
        <img
            [src]="isKid ? 'assets/icons/cartoon-pill.jpg' : (pill.image || 'assets/icons/pill.svg')"
            [alt]="pill.name"
            class="pill-image"
        />

        
        <h3 class="pill-name">{{ pill.name }}</h3>
        
        <p class="dosage">{{ pill.dosage }}</p>
        
        <p class="instruction">
            {{ pill.shortInstructions?.[0] || 'Please take your medication.' }}
        </p>
        
        <div class="buttons" *ngIf="!showPostponeOptions">
            <button class="btn skip" (click)="onSkip()">Skip</button>
            <button class="btn take" (click)="onTake()">Take</button>
            <button class="btn postpone" (click)="togglePostponeOptions()">Postpone</button>
        </div>

        <div class="postpone-options" *ngIf="showPostponeOptions">
            <h4>Postpone for:</h4>
            <div class="time-options">
                <button class="time-btn" (click)="onPostpone(1)">5 min</button>
                <button class="time-btn" (click)="onPostpone(10)">10 min</button>
                <button class="time-btn" (click)="onPostpone(15)">15 min</button>
                <button class="time-btn" (click)="onPostpone(20)">20 min</button>
                <button class="time-btn" (click)="onPostpone(25)">25 min</button>
                <button class="time-btn" (click)="onPostpone(30)">30 min</button>
            </div>
            <button class="btn back-btn" (click)="togglePostponeOptions()">Back</button>
        </div>
    </div>
</div>